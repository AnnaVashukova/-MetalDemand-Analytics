# Документация разработчика

## Общая логика сервиса

Сервис анализирует емкость рынка металлургической продукции России по схеме:

**Сбор данных → Обработка → Расчет спроса → Региональная детализация → Визуализация**

### Ключевая формула:
Спрос = Производство + Импорт - Экспорт


## Структура файлов и их назначение

### **parser.py** - Сбор данных
- **Задача**: Автоматический сбор данных из открытых источников
- **Источники**: 
  - Таможенная служба (customs.gov.ru) - импорт/экспорт
  - Росстат (rosstat.gov.ru) - электроэнергия и производство
- **Что делает**:
  - Парсит Excel файлы с товарной статистикой

### **process_data.py** - Обработка данных  
- **Задача**: Расчет основных показателей и объединение данных
- **Что делает**:
  - Обрабатывает сырые данные из папки `data/`
  - Строит мосты между кодами товаров и названиями продукции
  - Рассчитывает спрос по формуле: Производство + Импорт - Экспорт
  - Создает единую таблицу с помесячными данными за 2017-2024 гг

### **electricity_consumption_2017-2024_percent.xlsx** - Региональные веса
- **Назначение**: Для распределения общего спроса по регионам
- **Использование**: `Спрос_региона = Спрос_России × Доля_потребления_региона`

### **final_demand_metallurgy_clean.xlsx** - Результаты обработки
- **Назначение**: Основная таблица с расчетными показателями
- **Содержит**: Помесячные данные по товарам с разбивкой на производство, импорт, экспорт, спрос

### **res.xlsx** - Финальные данные для дашборда
- **Назначение**: Готовый датасет для визуализации
- **Содержит**: Спрос по регионам и товарам

## Товарные группы металлургии

Система отслеживает 8 основных категорий:

1. **Руда железная товарная**
2. **Концентрат железорудный**
3. **Чугун**
4. **Сталь нелегированная**
5. **Сталь нержавеющая**
6. **Сталь легированная**
7. **Прокат готовый**
8. **Трубы и профили**

## Дашборд

### Назначение
Визуализация результатов анализа для конечных пользователей

### Функциональность
- **Фильтрация** по товарам, регионам, периодам
- **Анализ динамики** спроса 2017-2024 гг
- **Сравнение регионов** по потреблению металлопродукции
- **Выявление трендов** и сезонности рынка

### Техническая реализация
- Интерактивные графики и таблицы
- Возможность детализации до помесячных данных

## Логика разработки

### 1. Проектирование данных
- Определение товарной номенклатуры металлургии
- Проектирование схемы хранения данных

### 2. Разработка парсеров
- Анализ структуры источников данных
- Создание устойчивых скраперов
- Обработка различных форматов Excel

### 3. Построение ETL-пайплайна
- Extract: сбор данных из источников
- Transform: очистка, нормализация, расчет показателей, заполнение пропусков
- Load: сохранение в структурированном виде

### 4. Расчет показателей
- Формула расчета спроса
- Региональное распределение

### 5. Визуализация
- Проектирование интерфейса дашборда
- Разработка интерактивных элементов
- Тестирование
  
## Процесс работы системы

1. **Запуск парсеров** - сбор актуальных данных
2. **Обработка данных** - расчет показателей спроса  
3. **Региональная детализация** - распределение по субъектам РФ
4. **Визуализация** - отображение в дашборде
5. **Анализ** - выявление тенденций и закономерностей

Система обеспечивает полный цикл анализа рынка металлургической продукции России с детализацией до уровня регионов и отдельных товарных групп.
